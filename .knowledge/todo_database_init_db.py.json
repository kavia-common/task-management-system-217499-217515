{"is_source_file": true, "format": "Python", "description": "This script initializes a SQLite database for a to-do list application, creating the tasks table, seeding sample data, and generating configuration files for database connection and visualization. It includes setup routines, schema enforcement, and utility functions to maintain compatibility with other utilities and tools.", "external_files": ["os", "sqlite3", "datetime"], "external_methods": ["os.path.join", "os.path.dirname", "os.makedirs", "os.path.exists", "os.open", "os.write", "os.close", "os.path.join", "sqlite3.connect", "sqlite3.Row", "sqlite3.Connection.execute", "datetime.now", "datetime.timezone.utc", "subprocess.run"], "published": ["main"], "classes": [], "methods": [{"name": "str get_db_path()", "description": "Returns the absolute path to the SQLite database file based on the script location.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection get_connection()", "description": "Establishes and returns a new SQLite connection with foreign keys enforced.", "scope": "", "scopeKind": ""}, {"name": "None ensure_tasks_table(conn: sqlite3.Connection)", "description": "Creates the 'tasks' table with the defined schema if it does not already exist.", "scope": "", "scopeKind": ""}, {"name": "None seed_sample_tasks(conn: sqlite3.Connection)", "description": "Seeds the tasks table with default sample tasks if the table is empty.", "scope": "", "scopeKind": ""}, {"name": "write_connection_info()", "description": "Writes connection details and instructions to 'db_connection.txt' for external utilities and scripting.", "scope": "", "scopeKind": ""}, {"name": "write_db_visualizer_env()", "description": "Creates an environment file for the database visualizer containing the database path.", "scope": "", "scopeKind": ""}, {"name": "None main()", "description": "Main routine which manages setup flow: creates database if missing, enforces schema, seeds data, and writes configuration files; also prints status info.", "scope": "", "scopeKind": ""}], "calls": ["get_db_path", "os.path.join", "os.path.dirname", "os.path.exists", "get_connection", "conn.execute", "conn.close", "seed_sample_tasks", "cursor.fetchone", "datetime.now", "subprocess.run", "os.makedirs", "os.open", "os.write", "os.close", "print"], "search-terms": ["init_db", "sqlite", "tasks table", "database setup", "sample tasks", "schema creation", "seed data", "connection info", "visualizer env", "database initialization"], "state": 2, "file_id": 9, "knowledge_revision": 29, "git_revision": "cbfa15c0d48187d165f858810b8723e5c202769c", "revision_history": [{"18": "40b1b9aebfe2c9322b559f26063829ac13f272a0"}, {"24": "46ecb7789d35cc2d79b59c74b8ebf36879e505b1"}, {"29": "cbfa15c0d48187d165f858810b8723e5c202769c"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ensure_tasks_table", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def ensure_tasks_table(conn: sqlite3.Connection) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection)"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_db_path", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def get_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "seed_sample_tasks", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def seed_sample_tasks(conn: sqlite3.Connection) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection)"}, {"_type": "tag", "name": "write_connection_info", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def write_connection_info():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "write_db_visualizer_env", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/init_db.py", "pattern": "/^def write_db_visualizer_env():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "11546d046626b5b56b3f801ea31ca583", "format-version": 4, "code-base-name": "todo_database", "filename": "todo_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}]}