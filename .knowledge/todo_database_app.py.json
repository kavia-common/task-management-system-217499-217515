{"is_source_file": true, "format": "Python", "description": "The source file 'app.py' is a FastAPI application that implements a REST API for managing to-do tasks stored in a SQLite database. It contains endpoints for health checks, creating, listing, updating, completing, and deleting tasks. It also initializes the database schema and configures CORS for development.", "external_files": ["requirements.txt", "myapp.db"], "external_methods": ["uvicorn.run"], "published": ["app"], "classes": [{"name": "TaskBase", "description": "Pydantic model defining the base task attributes (title, description)."}, {"name": "TaskCreate", "description": "Pydantic model used for creating new tasks, inherits from TaskBase."}, {"name": "TaskUpdate", "description": "Pydantic model used for updating a task with fields for title, description, and completion status."}, {"name": "TaskOut", "description": "Pydantic model representing the task data returned by API endpoints, including id, timestamps, etc."}], "methods": [{"name": "sqlite3.Connection get_connection()", "description": "Establishes a SQLite connection with foreign keys enabled and dict-like row factory.", "scope": "", "scopeKind": ""}, {"name": "None ensure_tasks_table()", "description": "Creates the 'tasks' table if it does not exist, with schema including id, title, description, completed, created_at, updated_at.", "scope": "", "scopeKind": ""}, {"name": "TaskOut row_to_task_out(row: sqlite3.Row)", "description": "Converts a sqlite3.Row to a TaskOut model object.", "scope": "", "scopeKind": ""}, {"name": "Response healthz()", "description": "A simple health check endpoint returning 200 OK status without database checks.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] health()", "description": "Returns API health status and basic info about the database connection and current timestamp.", "scope": "", "scopeKind": ""}, {"name": "List[TaskOut] list_tasks()", "description": "Retrieves and returns all tasks ordered by creation date descending.", "scope": "", "scopeKind": ""}, {"name": "TaskOut create_task(payload: TaskCreate)", "description": "Creates a new task based on provided payload and returns the created task.", "scope": "", "scopeKind": ""}, {"name": "TaskOut replace_task( task_id: int = Path(..., description=\"ID of the task to replace\"), payload: TaskUpdate = None, )", "description": "Replaces an existing task with new data provided in payload; raises 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "TaskOut complete_task( task_id: int = Path(..., description=\"ID of the task to modify\"), complete: Optional[bool] = True, )", "description": "Marks a task as complete or incomplete based on the 'complete' parameter; raises 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "None delete_task(task_id: int = Path(..., description=\"ID of the task to delete\"))", "description": "Deletes a task by ID; raises 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "None on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["sqlite3.connect", "conn.execute", "conn.commit", "conn.close", "uvicorn.run"], "search-terms": ["FastAPI task management", "SQLite CRUD API", "to-do tasks API", "app.py", "database schema", "CORS configuration", "health check endpoints", "task creation and update", "task completion toggle", "task deletion"], "state": 2, "file_id": 10, "knowledge_revision": 32, "git_revision": "3def2d8903e3f73037af7127f548a604d497e075", "revision_history": [{"21": ""}, {"27": "527e6318cee37df813bc57bab0370cbd1be3023a"}, {"28": "cbfa15c0d48187d165f858810b8723e5c202769c"}, {"32": "3def2d8903e3f73037af7127f548a604d497e075"}], "ctags": [{"_type": "tag", "name": "DB_FILE", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^DB_FILE = os.path.join(os.path.dirname(__file__), \"myapp.db\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TaskBase", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskCreate", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskCreate(TaskBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskOut", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskUpdate", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "complete_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def complete_task($/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to modify\"), complete: Optional[bool] = True, )"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    completed: bool = Field(..., description=\"Completion status of the task\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def create_task(payload: TaskCreate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "(payload: TaskCreate)"}, {"_type": "tag", "name": "delete_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def delete_task(task_id: int = Path(..., description=\"ID of the task to delete\")) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(task_id: int = Path(..., description=\"ID of the task to delete\"))"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    description: Optional[str] = Field(\"\", description=\"Detailed description of the task\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TaskBase", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    description: Optional[str] = Field(\"\", description=\"Detailed description of the task\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_tasks_table", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def ensure_tasks_table() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def health() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "healthz", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def healthz() -> Response:$/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "host", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    host = os.environ.get(\"HOST\", \"0.0.0.0\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "list_tasks", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def list_tasks() -> List[TaskOut]:$/", "language": "Python", "typeref": "typename:List[TaskOut]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    port = int(os.environ.get(\"PORT\", \"5001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "replace_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def replace_task($/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to replace\"), payload: TaskUpdate = None, )"}, {"_type": "tag", "name": "row_to_task_out", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def row_to_task_out(row: sqlite3.Row) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    title: str = Field(..., description=\"Short title for the task\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TaskBase", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    title: str = Field(..., description=\"Short title for the task\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}], "hash": "8f3cc6ca57bf8c4ed7e91b38e43e304c", "format-version": 4, "code-base-name": "todo_database", "filename": "todo_database/app.py", "fields": [{"name": "DB_FILE = os.path.join(os.path.dirname(__file__), \"myapp.db\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool completed", "scope": "TaskUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "TaskBase", "scopeKind": "class", "description": "unavailable"}, {"name": "host = os.environ.get(\"HOST\", \"0.0.0.0\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.environ.get(\"PORT\", \"5001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str title", "scope": "TaskBase", "scopeKind": "class", "description": "unavailable"}]}