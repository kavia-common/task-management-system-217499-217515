{"is_source_file": true, "format": "Python", "description": "This is a FastAPI application implementing a REST API for a to-do list using an SQLite database. It defines endpoints for health checks, CRUD operations on tasks (create, read, update, delete, toggle complete), and sets up database schema and connection management. The code also includes data models with Pydantic for request and response serialization.", "external_files": ["requirements.txt", "myapp.db"], "external_methods": ["get_connection", "ensure_tasks_table", "row_to_task_out"], "published": ["app"], "classes": [{"name": "TaskBase", "description": "Pydantic model for task data input, including title and description."}, {"name": "TaskCreate", "description": "Derived from TaskBase, used for creating new tasks."}, {"name": "TaskUpdate", "description": "Pydantic model for updating a task, including title, description, and completed status."}, {"name": "TaskOut", "description": "Pydantic model for serializing task output with id, timestamps, and completion status."}], "methods": [{"name": "sqlite3.Connection get_connection()", "description": "Creates and returns a new SQLite connection with foreign key constraints enabled and row factory set.", "scope": "", "scopeKind": ""}, {"name": "None ensure_tasks_table()", "description": "Ensures the tasks table exists in the database with the appropriate schema.", "scope": "", "scopeKind": ""}, {"name": "TaskOut row_to_task_out(row: sqlite3.Row)", "description": "Converts a sqlite3.Row object into a TaskOut model instance.", "scope": "", "scopeKind": ""}, {"name": "TaskOut complete_task( task_id: int = Path(..., description=\"ID of the task to modify\"), complete: Optional[bool] = True, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TaskOut create_task(payload: TaskCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None delete_task(task_id: int = Path(..., description=\"ID of the task to delete\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] health()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[TaskOut] list_tasks()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TaskOut replace_task( task_id: int = Path(..., description=\"ID of the task to replace\"), payload: TaskUpdate = None, )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_connection()", "ensure_tasks_table()", "row_to_task_out()"], "search-terms": ["FastAPI", "SQLite CRUD", "todo database", "tasks API", "app.py"], "state": 2, "file_id": 10, "knowledge_revision": 27, "git_revision": "527e6318cee37df813bc57bab0370cbd1be3023a", "revision_history": [{"21": ""}, {"27": "527e6318cee37df813bc57bab0370cbd1be3023a"}], "ctags": [{"_type": "tag", "name": "DB_FILE", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^DB_FILE = os.path.join(os.path.dirname(__file__), \"myapp.db\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TaskBase", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskCreate", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskCreate(TaskBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskOut", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskUpdate", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^class TaskUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "complete_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def complete_task($/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to modify\"), complete: Optional[bool] = True, )"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    completed: bool = Field(..., description=\"Completion status of the task\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def create_task(payload: TaskCreate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "(payload: TaskCreate)"}, {"_type": "tag", "name": "delete_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def delete_task(task_id: int = Path(..., description=\"ID of the task to delete\")) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(task_id: int = Path(..., description=\"ID of the task to delete\"))"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    description: Optional[str] = Field(\"\", description=\"Detailed description of the task\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TaskBase", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    description: Optional[str] = Field(\"\", description=\"Detailed description of the task\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_tasks_table", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def ensure_tasks_table() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def health() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_tasks", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def list_tasks() -> List[TaskOut]:$/", "language": "Python", "typeref": "typename:List[TaskOut]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "replace_task", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def replace_task($/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to replace\"), payload: TaskUpdate = None, )"}, {"_type": "tag", "name": "row_to_task_out", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^def row_to_task_out(row: sqlite3.Row) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    title: str = Field(..., description=\"Short title for the task\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TaskBase", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/task-management-system-217499-217515/todo_database/app.py", "pattern": "/^    title: str = Field(..., description=\"Short title for the task\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}], "hash": "b789bf6698808bd57a218ee0ec9845d8", "format-version": 4, "code-base-name": "todo_database", "filename": "todo_database/app.py", "fields": [{"name": "DB_FILE = os.path.join(os.path.dirname(__file__), \"myapp.db\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool completed", "scope": "TaskUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "TaskBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "TaskBase", "scopeKind": "class", "description": "unavailable"}]}